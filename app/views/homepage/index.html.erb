<article class="hp-article">
  <div class="hp-rows">
    <div class="hp-columns">
      <h1 class="hp-h1">
      ðŸ‘‹ Hi, I'm George
      </h1>
      <h2 class="hp-h2">
        Mad (computer) scientist. That's it. That's the bio. (I did make my
        first site
        <% duration = Time.now - Time.new(2019, 5, 7)
        years = (duration / (86_400 * 365)).to_i
        remaining_days = duration % (86_400 * 365)
        months = (remaining_days / (86_400 * 30)).to_i
        days = ((remaining_days % (86_400 * 30)) / 86_400).to_i %>
        <%= years %>
        years,
        <%= months %>
        months, and
        <%= days %>
        days ago though!)
      </h2>
      <% social_links = [
        { name: "X", url: "https://x.com/georgebaskervil" },
        {
          name: "Signal",
          url:
            "https://signal.me/#eu/Ui1-KTmlgnCbNj491iq3HSOJtrkY1aVHm4n0v97dvkGDbCqWsExOu66Fzg7-7iC9",
        },
        { name: "GitHub", url: "https://github.com/georgebaskervil" },
      ] %>
      <div class="hp-custom-breadcrumbs hp-li-div">
        <ul>
          <% social_links.each do |link| %>
            <li>
              <a href="<%= link[:url] %>" target="_blank" rel="noopener" class="text-accent">
                <%= link[:name] %>
              </a>
            </li>
          <% end %>
        </ul>
      </div>
    </div>
    <picture class="hp-image-container hp-picture">
      <source srcset="<%= vite_asset_path('~/images/me.avif') %>" type="image/avif">
      <source srcset="<%= vite_asset_path('~/images/me.webp') %>" type="image/webp">
      <source srcset="<%= vite_asset_path('~/images/me.jxl') %>" type="image/jxl">
      <%= image_tag(
        vite_asset_path("~/images/me.jpg"),
        alt: "A picture of me",
        loading: "eager",
        width: "654",
        height: "654",
        decoding: "sync",
        fetchpriority: "high",
      ) %>
    </picture>
  </div>
</article>
<article class="hp-article-2">
  <header class="hp-header-2">
    <h3 class="hp-h3">My best OSS projects:</h3>
    <a
      href="https://github.com/georgebaskervil?tab=repositories"
      class="hp-small-link"
      target="_self"
      rel="noreferrer"
    >
      See all projects
    </a>
  </header>

  <!-- Interactive Project Carousel -->
  <section class="hp-project-carousel">
    <% current_site_url = request.base_url %>
    <% featured_projects = [
      {
        title: "Libreverse",
        demo_url: "/streaming/libreverse_video",
        description: "My open-source metaverse project.",
        type: "video"
      },
      {
        title: "RobusText",
        demo_url: "/streaming/robustext_video",
        description: "A text editor designed to handle malformed unicode characters gracefully.",
        type: "video"
      },
      {
        title: "Georlist",
        demo_url: "/streaming/georlist_video",
        description: "A web service that compiles all the dns blocklists I use into one.",
        type: "video"
      },
      {
        title: "uwuifier",
        demo_url: "/streaming/uwuifier_video",
        description: "A Python project that uses stable diffusion to synthesise anime-style profile pictures.",
        type: "video"
      },
      {
        title: "TaskStack",
        demo_url: "/streaming/taskstack_video",
        description: "A todo list app I made custom for the way I work.",
        type: "video"
      },
      {
        title: "SpaceShooter",
        demo_url: "/streaming/spaceshooter_video",
        description: "A simple 2D space shooter game generated by Grok 3 with Gosu.",
        type: "video"
      }
    ] %>

    <div 
      class="carousel-container" 
      data-controller="project-carousel"
      data-action="mouseenter->project-carousel#pauseAutoAdvance mouseleave->project-carousel#resumeAutoAdvance"
    >
      <div class="carousel-wrapper">
        <button 
          class="carousel-btn carousel-btn-left" 
          data-project-carousel-target="prevButton"
          data-action="click->project-carousel#previous"
          aria-label="Previous project"
        >â€¹</button>
        
        <button 
          class="carousel-btn carousel-btn-right" 
          data-project-carousel-target="nextButton"
          data-action="click->project-carousel#next"
          aria-label="Next project"
        >â€º</button>
        <div class="carousel-slides" data-project-carousel-target="slides">
          <% featured_projects.each_with_index do |project, index| %>
            <div 
              class="carousel-slide <%= 'active' if index == 0 %>" 
              data-project-carousel-target="slide"
              data-slide="<%= index %>"
            >
              <div class="project-info">
                <h5 class="project-title"><%= project[:title] %></h5>
                <p class="project-description"><%= project[:description] %></p>
              </div>
              <% if project[:type] == "video" %>
                <div class="video-container">
                  <video 
                    class="carousel-video"
                    data-controller="hls"
                    data-stream-url="<%= project[:demo_url] %>"
                    data-project-carousel-target="video"
                    playsinline="true"
                    preload="metadata"
                    muted="true"
                    loop="true"
                    x-webkit-airplay="deny"
                    disablepictureinpicture="true"
                    disableremoteplayback="true">
                    Your browser does not support the video tag.
                  </video>
                </div>
              <% else %>
                <div class="iframe-container">
                  <iframe 
                    src="<%= project[:demo_url] %>" 
                    title="<%= project[:title] %> Preview"
                    loading="lazy"
                    sandbox="allow-scripts allow-same-origin allow-popups allow-forms allow-top-navigation"
                    referrerpolicy="strict-origin-when-cross-origin">
                  </iframe>
                </div>
              <% end %>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  </section>
</article>

<article class="hp-spacing">
  <header class="hp-header">
    <h3 class="hp-h3">Some of the best photos I have taken:</h3>
    <a href="/images" class="hp-small-link">
      See all photos
    </a>
  </header>
  <section class="hp-image-grid-container">
    <% @images.first(8).each_with_index do |img, index| %>
      <div class="image-container">
        <% ext = File.extname(img) %>
        <% base_name = File.basename(img, ext) %>
        <a
          href="<%= vite_asset_path("losslessphotos/#{base_name.sub(/^resized_/, '') + ext}") %>"
          target="_blank"
        >
          <picture>
            <source
              srcset="<%= vite_asset_path("photos/AVIFs/#{base_name}.avif") %>"
              type="image/avif"
            >
            <source
              srcset="<%= vite_asset_path("photos/WebPs/#{base_name}.webp") %>"
              type="image/webp"
            >
            <source
              srcset="<%= vite_asset_path("photos/JXLs/#{base_name}.jxl") %>"
              type="image/jxl"
            >
            <%= image_tag(
              vite_asset_path("photos/#{img}"),
              loading: "lazy",
              decoding: "async",
              fetchpriority: "low",
            ) %>
          </picture>
        </a>
      </div>
    <% end %>
  </section>
</article>

<article>
  <header class="hp-header">
    <h3 class="hp-h3">The latest blog posts I have written:</h3>
    <a href="/posts" class="hp-small-link">
      See all posts
    </a>
  </header>
  <section class="posts-section">
    <% @latest_posts.each do |article| %>
      <%= link_to post_path(File.basename(article[:file_path], '.md')), class: "posts-card" do %>
        <h2 class="posts-title"><%= article[:title] %></h2>
        <p class="posts-content"><%= article[:description] %></p>
        <p class="posts-published-date-card-ver">Published on
          <%= article[:published_at].strftime("%B %d, %Y") %></p>
      <% end %>
    <% end %>
  </section>
</article>
